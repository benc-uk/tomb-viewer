<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" type="image/png" href="favicon.png" />

    <title>Tomb Raider WebGL</title>
  </head>

  <body x-data="app" @keydown.h="showHelp = !showHelp">
    <div id="controls" class="blurbox">
      <details>
        <summary>üõ†Ô∏è</summary>
        <br />
        <div class="flex-row">
          <label for="bright"> Brightness</label>
          <input type="range" min="0.1" max="2.0" step="0.01" id="bright" x-model="brightness" />
        </div>
        <div class="flex-row">
          <label for="fov"> FOV</label>
          <input type="range" min="30" max="90" step="1" id="fov" x-model="fov" />
        </div>
        <div class="flex-row">
          <label for="speed"> Speed</label>
          <input type="range" min="50" max="400" step="1" id="speed" x-model="speed" />
        </div>
        <div class="flex-row">
          <label for="texFilt"> Filtering</label>
          <input type="checkbox" id="texFilt" @click="texFilter" />
        </div>
        <div class="flex-row">
          <label for="smooth"> Smoothing</label>
          <input type="checkbox" id="smooth" x-model="smooth" />
        </div>
        <div class="flex-row">
          <label for="stretch"> Stretch</label>
          <input type="checkbox" id="stretch" x-model="fullWidth" />
        </div>
        <div class="flex-row">
          <label for="stretch"> Widescreen</label>
          <input type="checkbox" id="stretch" @click="widescreen" checked />
        </div>

        <div class="flex-row">
          <label for="stretch"> Resolution</label>
          <select x-model="width">
            <option>320</option>
            <option>640</option>
            <option>800</option>
            <option>1024</option>
            <option>1280</option>
            <option>1600</option>
          </select>
        </div>
      </details>
    </div>

    <div x-show="stats" id="stats" class="blurbox">
      <pre id="statsInner" x-text="stats"></pre>
    </div>

    <main>
      <select x-model="levelName" id="levelSelect">
        <option value="" disabled>&nbsp; Tomb Raider 1</option>
        <option value="TR1/01-Caves.PHD">01 Caves</option>
        <option value="TR1/02-City-of-Vilcabamba.PHD">02 City of Vilcabamba</option>
        <option value="TR1/03-The-Lost-Valley.PHD">03 The Lost Valley</option>
        <option value="TR1/04-Tomb-of-Qualopec.PHD">04 Tomb of Qualopec</option>
        <option value="TR1/05-St-Francis-Folly.PHD">05 St Francis' Folly</option>
        <option value="TR1/06-Colosseum.PHD">06 Colosseum</option>
        <option value="TR1/07-Palace-Midas.PHD">07 Palace Midas</option>
        <option value="TR1/08-Cistern.PHD">08 The Cistern</option>
        <option value="TR1/09-Tomb-of-Tihocan.PHD">09 Tomb of Tihocan</option>
        <option value="TR1/10-City-of-Khamoon.PHD">10 City of Khamoon</option>
        <option value="TR1/11-Obelisk-of-Khamoon.PHD">11 Obelisk of Khamoon</option>
        <option value="TR1/12-Sanctuary-of-the-Scion.PHD">12 Sanctuary of the Scion</option>
        <option value="TR1/13-Natlas-Mines.PHD">13 Natla's Mines</option>
        <option value="TR1/14-Atlantis.PHD">14 Atlantis</option>
        <option value="TR1/15-The-Great-Pyramid.PHD">15 The Great Pyramid</option>
        <option value="TR1/00-Laras-Home.PHD">00 Laras Home</option>
        <option value="" disabled>&nbsp; Unfinished Business</option>
        <option value="TR1-UB/01-Return-to-Egypt.PHD">01 Return to Egypt</option>
        <option value="TR1-UB/02-Temple-of-the-Cat.PHD">02 Temple of the Cat</option>
        <option value="TR1-UB/03-Atlantean-Stronghold.PHD">03 Atlantean Stronghold</option>
        <option value="TR1-UB/04-The-Hive.PHD">04 The Hive</option>
        <option value="" disabled>&nbsp; Tomb Raider 2</option>
        <option value="TR2/01-Great-Wall.TR2">01 Great Wall</option>
        <option value="TR2/02-Venice.TR2">02 Venice</option>
        <option value="TR2/03-Bartolis-Hideout.TR2">03 Bartoli's Hideout</option>
        <option value="TR2/04-Opera-House.TR2">04 Opera House</option>
        <option value="TR2/05-Offshore-Rig.TR2">05 Offshore Rig</option>
        <option value="TR2/06-Diving-Area.TR2">06 Diving Area</option>
        <option value="TR2/07-40-Fathoms.TR2">07 40 Fathoms</option>
        <option value="TR2/08-Wreck-of-the-Maria-Doria.TR2">08 Wreck of the Maria Doria</option>
        <option value="TR2/09-Living-Quarters.TR2">09 Living Quarters</option>
        <option value="TR2/10-The-Deck.TR2">10 The Deck</option>
        <option value="TR2/11-Tibetan-Foothills.TR2">11 Tibetan Foothills</option>
        <option value="TR2/12-Barkhang-Monastery.TR2">12 Barkhang Monastery</option>
        <option value="TR2/13-Catacombs-of-the-Talion.TR2">13 Catacombs of the Talion</option>
        <option value="TR2/14-Ice-Palace.TR2">14 Ice Palace</option>
        <option value="TR2/15-Temple-of-Xian.TR2">15 Temple of Xian</option>
        <option value="TR2/16-Floating-Islands.TR2">16 Floating Islands</option>
        <option value="TR2/17-The-Dragons-Lair.TR2">17 The Dragon's Lair</option>
        <option value="TR2/18-Home-Sweet-Home.TR2">18 Home Sweet Home</option>
        <option value="TR2/00-Laras-Home.TR2">00 Laras Home</option>
        <option value="" disabled>&nbsp; Golden Mask</option>
        <option value="TR2-GM/01-The-Cold-War.TR2">01 The Cold War</option>
        <option value="TR2-GM/02-Fools-Gold.TR2">02 Fools Gold</option>
        <option value="TR2-GM/03-Furnace-of-the-Gods.TR2">03 Furnace of the Gods</option>
        <option value="TR2-GM/04-Kingdom.TR2">04 Kingdom</option>
        <option value="TR2-GM/05-Nightmare-in-Vegas.TR2">05 Nightmare in Vegas</option>
        <option value="" disabled>&nbsp; Tomb Raider 3</option>
        <option value="TR3/01-Jungle.TR3">01 Jungle</option>
        <option value="TR3/02-Temple-Ruins.TR3">02 Temple Ruins</option>
        <option value="TR3/03-The-River-Ganges.TR3">03 The River Ganges</option>
        <option value="TR3/04-Caves-of-Kaliya.TR3">04 Caves of Kaliya</option>
      </select>

      <canvas x-ref="canvas" :class="{'pixelated': !smooth, 'fullWidth': fullWidth}"></canvas>

      <div x-show="error" id="error" class="blurbox" x-text="error"></div>

      <div x-cloak x-show="showHelp" id="help" class="blurbox" @click="showHelp = false">
        Tomb Raider - WebGL Edition<br />Ben Coleman 2024, v0.0.7
        <ul>
          <li>Cursor / WASD - Move</li>
          <li>Mouse - Look around</li>
          <li>[ ] - Move up & down</li>
          <li>1 - Swap alt rooms</li>
          <li>2 - Open/close doors</li>
          <li>H - Show or hide this help</li>
        </ul>
      </div>

      <div x-cloak x-show="loading" id="help" class="blurbox">
        <h1>Loading...</h1>
      </div>
    </main>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
